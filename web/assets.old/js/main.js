!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery||Zepto)}(function(t){var e=function(e,a,n){e=t(e);var r,o=this,i=e.val();a="function"==typeof a?a(e.val(),void 0,e,n):a;var s={invalid:[],getCaret:function(){try{var t,a=0,n=e.get(0),r=document.selection,o=n.selectionStart;return r&&-1===navigator.appVersion.indexOf("MSIE 10")?(t=r.createRange(),t.moveStart("character",e.is("input")?-e.val().length:-e.text().length),a=t.text.length):(o||"0"===o)&&(a=o),a}catch(i){}},setCaret:function(t){try{if(e.is(":focus")){var a,n=e.get(0);n.setSelectionRange?n.setSelectionRange(t,t):n.createTextRange&&(a=n.createTextRange(),a.collapse(!0),a.moveEnd("character",t),a.moveStart("character",t),a.select())}}catch(r){}},events:function(){e.on("keyup.mask",s.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){e.keydown().keyup()},100)}).on("change.mask",function(){e.data("changed",!0)}).on("blur.mask",function(){i===e.val()||e.data("changed")||e.triggerHandler("change"),e.data("changed",!1)}).on("keydown.mask, blur.mask",function(){i=e.val()}).on("focus.mask",function(e){!0===n.selectOnFocus&&t(e.target).select()}).on("focusout.mask",function(){n.clearIfNotMatch&&!r.test(s.val())&&s.val("")})},getRegexMask:function(){for(var t,e,n,r,i=[],s=0;s<a.length;s++)(t=o.translation[a.charAt(s)])?(e=t.pattern.toString().replace(/.{1}$|^.{1}/g,""),n=t.optional,(t=t.recursive)?(i.push(a.charAt(s)),r={digit:a.charAt(s),pattern:e}):i.push(n||t?e+"?":e)):i.push(a.charAt(s).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return i=i.join(""),r&&(i=i.replace(RegExp("("+r.digit+"(.*"+r.digit+")?)"),"($1)?").replace(RegExp(r.digit,"g"),r.pattern)),RegExp(i)},destroyEvents:function(){e.off("keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(t){var a=e.is("input")?"val":"text";return 0<arguments.length?(e[a]()!==t&&e[a](t),a=e):a=e[a](),a},getMCharsBeforeCount:function(t,e){for(var n=0,r=0,i=a.length;i>r&&t>r;r++)o.translation[a.charAt(r)]||(t=e?t+1:t,n++);return n},caretPos:function(t,e,n,r){return o.translation[a.charAt(Math.min(t-1,a.length-1))]?Math.min(t+n-e-r,n):s.caretPos(t+1,e,n,r)},behaviour:function(e){e=e||window.event,s.invalid=[];var a=e.keyCode||e.which;if(-1===t.inArray(a,o.byPassKeys)){var n=s.getCaret(),r=s.val().length,i=r>n,c=s.getMasked(),l=c.length,u=s.getMCharsBeforeCount(l-1)-s.getMCharsBeforeCount(r-1);return s.val(c),!i||65===a&&e.ctrlKey||(8!==a&&46!==a&&(n=s.caretPos(n,r,l,u)),s.setCaret(n)),s.callbacks(e)}},getMasked:function(t){var e,r,i=[],c=s.val(),l=0,u=a.length,p=0,f=c.length,d=1,h="push",m=-1;for(n.reverse?(h="unshift",d=-1,e=0,l=u-1,p=f-1,r=function(){return l>-1&&p>-1}):(e=u-1,r=function(){return u>l&&f>p});r();){var v=a.charAt(l),g=c.charAt(p),_=o.translation[v];_?(g.match(_.pattern)?(i[h](g),_.recursive&&(-1===m?m=l:l===e&&(l=m-d),e===m&&(l-=d)),l+=d):_.optional?(l+=d,p-=d):_.fallback?(i[h](_.fallback),l+=d,p-=d):s.invalid.push({p:p,v:g,e:_.pattern}),p+=d):(t||i[h](v),g===v&&(p+=d),l+=d)}return t=a.charAt(e),u!==f+1||o.translation[t]||i.push(t),i.join("")},callbacks:function(t){var r=s.val(),o=r!==i,c=[r,t,e,n],l=function(t,e,a){"function"==typeof n[t]&&e&&n[t].apply(this,a)};l("onChange",!0===o,c),l("onKeyPress",!0===o,c),l("onComplete",r.length===a.length,c),l("onInvalid",0<s.invalid.length,[r,t,e,s.invalid,n])}};o.mask=a,o.options=n,o.remove=function(){var t=s.getCaret();return s.destroyEvents(),s.val(o.getCleanVal()),s.setCaret(t-s.getMCharsBeforeCount(t)),e},o.getCleanVal=function(){return s.getMasked(!0)},o.init=function(a){a=a||!1,n=n||{},o.byPassKeys=t.jMaskGlobals.byPassKeys,o.translation=t.jMaskGlobals.translation,o.translation=t.extend({},o.translation,n.translation),o=t.extend(!0,{},o,n),r=s.getRegexMask(),!1===a?(n.placeholder&&e.attr("placeholder",n.placeholder),e.attr("autocomplete","off"),s.destroyEvents(),s.events(),a=s.getCaret(),s.val(s.getMasked()),s.setCaret(a+s.getMCharsBeforeCount(a,!0))):(s.events(),s.val(s.getMasked()))},o.init(!e.is("input"))};t.maskWatchers={};var a=function(){var a=t(this),r={},o=a.attr("data-mask");return a.attr("data-mask-reverse")&&(r.reverse=!0),a.attr("data-mask-clearifnotmatch")&&(r.clearIfNotMatch=!0),"true"===a.attr("data-mask-selectonfocus")&&(r.selectOnFocus=!0),n(a,o,r)?a.data("mask",new e(this,o,r)):void 0},n=function(e,a,n){n=n||{};var r=t(e).data("mask"),o=JSON.stringify;e=t(e).val()||t(e).text();try{return"function"==typeof a&&(a=a(e)),"object"!=typeof r||o(r.options)!==o(n)||r.mask!==a}catch(i){}};t.fn.mask=function(a,r){r=r||{};var o=this.selector,i=t.jMaskGlobals,s=t.jMaskGlobals.watchInterval,c=function(){return n(this,a,r)?t(this).data("mask",new e(this,a,r)):void 0};return t(this).each(c),o&&""!==o&&i.watchInputs&&(clearInterval(t.maskWatchers[o]),t.maskWatchers[o]=setInterval(function(){t(document).find(o).each(c)},s)),this},t.fn.unmask=function(){return clearInterval(t.maskWatchers[this.selector]),delete t.maskWatchers[this.selector],this.each(function(){var e=t(this).data("mask");e&&e.remove().removeData("mask")})},t.fn.cleanVal=function(){return this.data("mask").getCleanVal()},t.applyDataMask=function(e){e=e||t.jMaskGlobals.maskElements,(e instanceof t?e:t(e)).filter(t.jMaskGlobals.dataMaskAttr).each(a)};var r={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};t.jMaskGlobals=t.jMaskGlobals||{},r=t.jMaskGlobals=t.extend(!0,{},r,t.jMaskGlobals),r.dataMask&&t.applyDataMask(),setInterval(function(){t.jMaskGlobals.watchDataMask&&t.applyDataMask()},r.watchInterval)}),function(t){"use strict";t(document).ready(function(){var e;t(document).on("click",".btn-confirm",function(a){a.preventDefault(),e=t(this),e.is("a")&&t("#confirmation-modal #confirmation-modal-confirm").attr("href",e.attr("href")),t("#confirmation-modal").modal("show")}),t("#confirmation-modal #confirmation-modal-confirm").click(function(t){e.is("button")&&(t.preventDefault(),e.closest("form").submit())})})}(jQuery),function(t){function e(e){return params="",t.each(e,function(t,e){params+=e+","}),"?applications="+encodeURIComponent(params.replace(/,\s*$/,""))}function a(){t("#selected-jeunes-target").attr("href",t("#selected-jeunes-target").attr("data-href")+e(p))}function n(){f>0?t("#selected-jeunes-target").removeClass("disabled"):t("#selected-jeunes-target").addClass("disabled")}function r(e){return params="",t.each(e,function(t,e){params+=e+","}),"?mails="+encodeURIComponent(params.replace(/,\s*$/,""))}function o(){t(".data-mails-targets").each(function(){t(this).attr("href",t(this).attr("data-href")+r(d))})}function i(){h>0?t(".data-mails-targets").removeClass("disabled"):t(".data-mails-targets").addClass("disabled")}function s(e){"login"==e?(t(".form-group-_username").show(),t(".form-group-_password").show(),t(".form-group-user").hide()):(t(".form-group-_username").hide(),t(".form-group-_password").hide(),t(".form-group-user").show())}t(".signalBoxAlert").hide(),t("#signalContent form").submit(function(e){e.preventDefault(),t.ajax({url:Routing.generate("service_civique_mission_report_create",{id:t(this).attr("data-missionId"),status:t(".select-report").val()}),type:"GET",error:function(){},success:function(e){t(".signalBox").hide(),t(".signalBoxAlert").show()}})}),t("input").iCheck({checkboxClass:"icheckbox_minimal",radioClass:"iradio_minimal",increaseArea:"20%"}),t(".show-tooltip").tooltip({trigger:"focus"}),yepnope({test:Modernizr.mq("only all"),yep:"/assets/js/vendor/salvattore.js",complete:function(){t("html").addClass("grid-ready")}});var c=function(){return"function"==typeof document.createElement("input").checkValidity};yepnope({test:!c(),yep:"/assets/js/vendor/webshim.js",complete:function(){}});var l=function(){var e="open",a=function(t,a,n){"true"==t.attr("aria-expanded")?(t.addClass(e),a.addClass(e).removeClass("sr-only"),n?a.slideDown():a.show()):(t.removeClass(e),n?a.removeClass(e).slideUp():a.hide().removeClass("sr-only"))},n=function(t,e){var n="true"===t.attr("aria-expanded")?"false":"true",r="undefined"==typeof t.attr("data-animated")||"true"===t.attr("data-animated");t.attr("aria-expanded",n),a(t,e,r)};t("a[aria-expanded]").each(function(){var e=t(this),n=t("#"+e.attr("aria-controls"));a(e,n,!1)}).on("click",function(e){var a=t(this),r=t("#"+a.attr("aria-controls"));n(a,r),e.preventDefault()})},u=function(){if(Modernizr.inputtypes.date)t(".input-group.date .input-group-addon").hide().parent().removeClass("input-group");else{var e=t(".input-group.date"),a=e.children("input");a.val(a.attr("data-formatted")),e.datepicker({autoclose:!0,format:"dd/mm/yyyy",language:"fr"})}};u(),l(),t(".control-header-link, .profil-header-link").click(function(e){t(this).hasClass("actived")?(t(this).removeClass("actived"),t("#"+t(this).attr("aria-controls")).removeClass("in")):(t(this).addClass("actived"),t("#"+t(this).attr("aria-controls")).addClass("in")),e.preventDefault()});var p=[],f=0;t(".jeunes-select .icheckbox_minimal").each(function(e){t(this).hasClass("checked")&&(p.push(t(this).children("input[type=checkbox].data-jeune-select").val()),f++)}),a(),n(),t("input[type=checkbox].data-jeune-select").on("ifChecked",function(e){p.push(t(this).val()),a(),f++,n()}),t("input[type=checkbox].data-jeune-select").on("ifUnchecked",function(e){p.splice(p.indexOf(t(this).val()),1),a(),f--,n()}),t(".jeunes-select .select-all-checkbox").on("ifChecked",function(e){t("input[type=checkbox].data-jeune-select").each(function(){t(this).iCheck("check")})}),t(".jeunes-select .select-all-checkbox").on("ifUnchecked",function(e){t("input[type=checkbox].data-jeune-select").each(function(){t(this).iCheck("uncheck")})});var d=[],h=0;t(".icheckbox_minimal").each(function(e){t(this).hasClass("checked")&&(d.push(t(this).children("input[type=checkbox].data-mails").val()),h++)}),o(),i(),t("input[type=checkbox].data-mails").on("ifChecked",function(e){d.push(t(this).val()),o(),h++,i()}),t("input[type=checkbox].data-mails").on("ifUnchecked",function(e){d.splice(d.indexOf(t(this).val()),1),o(),h--,i()}),t(".status_select").on("change",function(){var e=t(this),a=e.parents("tr").attr("data-mission"),n=e.val();t.ajax({url:Routing.generate("service_civique_mission_status",{id:a,status:n}),type:"POST",error:function(){},success:function(t){2==n?window.location.href=Routing.generate("service_civique_application_user_mission_select",{id:a}):location.reload()}})}),t(".cancelupdates").on("click",function(e){var a=t(this),n=a.parents("tr").attr("data-mission");t.ajax({url:Routing.generate("service_civique_mission_cancel_updates",{id:n}),type:"POST",error:function(){},success:function(t){location.reload()}}),e.preventDefault()}),t("#fos_user_registration_form_organization_approvalNumber").on("blur",function(e){t.ajax({url:Routing.generate("service_civique_approval_show",{approval_number:t("#fos_user_registration_form_organization_approvalNumber").val()})}).done(function(e){t("#fos_user_registration_form_organization_name").val(e.organization_name),t("#fos_user_registration_form_organization_location_address").val(e.address),t("#fos_user_registration_form_organization_location_zipCode").val(e.zip_code),t("#fos_user_registration_form_organization_location_city").val(e.city)}).fail(function(){})}),t(".select-all-checkbox").on("ifChecked",function(e){t("input[type=checkbox].data-mails").each(function(){t(this).iCheck("check")})}),t(".select-all-checkbox").on("ifUnchecked",function(e){t("input[type=checkbox].data-mails").each(function(){t(this).iCheck("uncheck")})}),t(".remove-resume").on("click",function(){t(this).parent().hide(),t.ajax({url:Routing.generate("service_civique_resume_delete"),type:"POST",error:function(){},success:function(){}})}),t(".form-group-hasaccount").length>0&&(t(".form-group-_username").hide(),t(".form-group-_password").hide(),t(".form-group-user").hide(),t("#service_civique_application_hasaccount_0").on("ifChecked",function(t){s("login")}),t("#service_civique_application_hasaccount_1").on("ifChecked",function(t){s("create")})),t(function(){t('[data-toggle="tooltip"]').tooltip()}),window.location.href.indexOf("?sorting%5B")>-1&&(location.href="#scroll-content"),t(".form-group-organizationName").hide(),t("#service_civique_newsletter_role").on("change",function(){var e=t(this);2==e.val()?t(".form-group-organizationName").show():t(".form-group-organizationName").hide()}),t("#fos_user_registration_form_organization_approvalNumber, #approval_number_preview, #fos_user_profile_form_organization_approvalNumber, #form_approval_number, .approvalnumberfield").mask("BB-000-00-00000-00",{translation:{B:{pattern:/[A-Z]/,transform:"X"}}}),t("#fos_user_registration_form_organization_approvalNumber, #approval_number_preview, #fos_user_profile_form_organization_approvalNumber, #form_approval_number, .approvalnumberfield").on("input",function(){t(this).val(t(this).val().toUpperCase())}),t("#approval_number_preview, #fos_user_registration_form_organization_approvalNumber, #form_approval_number").on("input",function(){var e=t(".conflict_page").attr("data-url")+"?approval_number="+t(this).val();t(".conflict_page").attr("href",e)});var m=t(".conflict_page").attr("data-url")+"?approval_number="+t("#form_approval_number").val();t(".conflict_page").attr("href",m)}(jQuery),function(t){var e=t(".city-input"),a=t(".country-input"),n=t(".zipcode-input"),r=t(".area-input"),o=t(".departement-input"),i=function(e,a){var n=e.prop("attributes"),r=[];if(a.length>0)r.push('<select name="'+n.name.value+'" class="'+n["class"].value+'" id="'+n.id.value+'">'),t.each(a,function(t,e){r.push('<option value="'+e.name+'">'+e.name+"</option>")}),r.push("</select>");else{var o=a;r.push('<input type="text" name="'+n.name.value+'" class="'+n["class"].value+'" id="'+n.id.value+'" value="'+o+'" />')}return r=r.join(""),e.replaceWith(r),e=t(e.selector)};a.on("input",function(){"FR"!=t(this).val()&&(e=i(e,""))}),r.on("change",function(e){var a=t(this).attr("data-departements-datas-url"),n=t(t(this).attr("data-target"));t.getJSON(a,{region:t(this).val()},function(e){var a=[];e=e.sort(function(t,e){return t.name>e.name}),a.push('<option value="">Tous les départements</option>'),t.each(e,function(t,e){a.push('<option value="'+e.code+'">'+e.name+"</option>")}),n.html(a)})}),o.on("change",function(e){var a=t(this).attr("data-area-datas-url");t(t(this).attr("data-target"));t.getJSON(a,{departement:t(this).val()},function(t){r.children("option[value="+t+"]").attr("selected","selected")})}),n.on("input",function(){var n=t(this).val();if("FR"==a.val())return 5!=n.length?void(e=i(e,"")):void t.ajax({url:t(this).attr("data-cities-url")+"?zipcode="+n,success:function(t){e=i(e,t)},error:function(){}})})}(jQuery);